package packet

import java.nio.ByteBuffer
import binary.PacketField
import binary.Serializer

open class Packet {

    fun compose(): ByteArray {
        var bytes = Serializer.compose(this)
        val buffer = ByteBuffer.allocate(4 + bytes.size)
        buffer.putInt(bytes.size)
        buffer.put(bytes)

        buffer.flip()
        val byteArray = ByteArray(buffer.remaining())
        buffer.get(byteArray)
        return byteArray
    }

}

// 00000030 0fa0 001d50524f44554354494f4e2d3230323130313237313333372d48544d4c35000548544d4c350000000200000001
// 00000025 09ba 0000 001f 54455354352d4949442d313237333933313037352d31353434383934343433
// 0000009c 0973 0049 333637366235326664636135666162363538396662306465623639353236616365356165393839612d6266326534336163616432323461346230663237613038346435636234396164
// 00002710      0049 333637366f35327371706e35736e6f36353839736f3071726f36393532366e7072356e723938396e2d6f73327234336e706e713232346e346f307332376e3038347135706f34396e71


// 00000030 0fa0 001d50524f44554354494f4e2d3230323130313237313333372d48544d4c35000548544d4c350000000200000001
// 00000025 09ba 0000 001f 54455354352d4949442d313237333933313037352d34323237343438333739
//                    333637366235326664636135666162363538396662306465623639353236616365356165393839612d6266326534336163616432323461346230663237613038346435636234396164
// 0000009c 0973 0049 336264373666373466656465353838396238363635613230363265343338363263363437636232612d6266326534336163616432323461346230663237613038346435636234396164
// 00003031      0049 336f71373673373473727172353838396f383636356e3230363272343338363270363437706f326e2d6f73327234336e706e713232346e346f307332376e3038347135706f34396e71